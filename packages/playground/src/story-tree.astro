---
import { parseStories } from "./shared.ts";
import StoryTreeItem from "./story-tree-item.astro";

let files: Array<any> = [];
try {
	files = await Astro.glob("{{stories}}");
} catch (err) {
	console.error("Failed to find stories.", err);
}
const stories = parseStories("{{path}}", files);
---

<ul is="pg-tree" role="tree">
	{stories.map((story) => <StoryTreeItem story={story} />)}
</ul>
